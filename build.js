!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.EventSky=n()}(this,function(){"use strict";function e(e){return e&&e.__esModule?e.default:e}function n(e,n){return n={exports:{}},e(n,n.exports),n.exports}var t=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},r=function(e){return Object(t(e))},o={}.hasOwnProperty,i=function(e,n){return o.call(e,n)},u={}.toString,a=function(e){return u.call(e).slice(8,-1)},c=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)},f=function(e){return c(t(e))},s=Math.ceil,l=Math.floor,h=function(e){return isNaN(e=+e)?0:(e>0?l:s)(e)},d=Math.min,v=function(e){return e>0?d(h(e),9007199254740991):0},p=Math.max,y=Math.min,_=function(e,n){return e=h(e),e<0?p(e+n,0):y(e,n)},b=n(function(e){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),g=b["__core-js_shared__"]||(b["__core-js_shared__"]={}),E=0,m=Math.random(),w=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++E+m).toString(36))},S=function(e){return g[e]||(g[e]={})}("keys"),O=function(e){return function(n,t,r){var o,i=f(n),u=v(i.length),a=_(r,u);if(e&&t!=t){for(;u>a;)if((o=i[a++])!=o)return!0}else for(;u>a;a++)if((e||a in i)&&i[a]===t)return e||a||0;return!e&&-1}}(!1),j=function(e){return S[e]||(S[e]=w(e))}("IE_PROTO"),k=function(e,n){var t,r=f(e),o=0,u=[];for(t in r)t!=j&&i(r,t)&&u.push(t);for(;n.length>o;)i(r,t=n[o++])&&(~O(u,t)||u.push(t));return u},M="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),x=Object.keys||function(e){return k(e,M)},A=n(function(e){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),P=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},F=function(e,n,t){if(P(e),void 0===n)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,o){return e.call(n,t,r,o)}}return function(){return e.apply(n,arguments)}},H=function(e){return"object"==typeof e?null!==e:"function"==typeof e},I=function(e){if(!H(e))throw TypeError(e+" is not an object!");return e},N=function(e){try{return!!e()}catch(e){return!0}},T=!N(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),W=b.document,C=H(W)&&H(W.createElement),R=function(e){return C?W.createElement(e):{}},B=!T&&!N(function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a}),D=function(e,n){if(!H(e))return e;var t,r;if(n&&"function"==typeof(t=e.toString)&&!H(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!H(r=t.call(e)))return r;if(!n&&"function"==typeof(t=e.toString)&&!H(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")},G=Object.defineProperty,z=T?Object.defineProperty:function(e,n,t){if(I(e),n=D(n,!0),I(t),B)try{return G(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[n]=t.value),e},L={f:z},U=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},q=T?function(e,n,t){return L.f(e,n,U(1,t))}:function(e,n,t){return e[n]=t,e},J=function(e,n,t){var r,o,i,u=e&J.F,a=e&J.G,c=e&J.S,f=e&J.P,s=e&J.B,l=e&J.W,h=a?A:A[n]||(A[n]={}),d=h.prototype,v=a?b:c?b[n]:(b[n]||{}).prototype;a&&(t=n);for(r in t)(o=!u&&v&&void 0!==v[r])&&r in h||(i=o?v[r]:t[r],h[r]=a&&"function"!=typeof v[r]?t[r]:s&&o?F(i,b):l&&v[r]==i?function(e){var n=function(n,t,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,t)}return new e(n,t,r)}return e.apply(this,arguments)};return n.prototype=e.prototype,n}(i):f&&"function"==typeof i?F(Function.call,i):i,f&&((h.virtual||(h.virtual={}))[r]=i,e&J.R&&d&&!d[r]&&q(d,r,i)))};J.F=1,J.G=2,J.S=4,J.P=8,J.B=16,J.W=32,J.U=64,J.R=128;var K=J;!function(e,n){var t=(A.Object||{})[e]||Object[e],r={};r[e]=n(t),K(K.S+K.F*N(function(){t(1)}),"Object",r)}("keys",function(){return function(e){return x(r(e))}});var Q=A.Object.keys,V=n(function(e){e.exports={default:Q,__esModule:!0}}),X=e(V),Y=n(function(e,n){n.__esModule=!0,n.default=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}}),Z=e(Y);K(K.S+K.F*!T,"Object",{defineProperty:L.f});var $=A.Object,ee=function(e,n,t){return $.defineProperty(e,n,t)},ne=n(function(e){e.exports={default:ee,__esModule:!0}}),te=n(function(e,n){n.__esModule=!0;var t=function(e){return e&&e.__esModule?e:{default:e}}(ne);n.default=function(){function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,t.default)(e,o.key,o)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}()}),re=e(te),oe={createNewEventMap:function(e){return{handlers:0,_handlers:0,_name:e,on:{},once:{},beforeAll:{},afterAll:{}}},curryWhenHandler:function(e){var n=this;return function(t,r){if("string"!=typeof t||t.length<1||"function"!=typeof r)return console.warn('EventSky warning: "'+t+'" event must be a string and handler must be a function - not set with .'+e+" handler"),n;n.events[t]||(n.events[t]=n._utils.createNewEventMap(t)),n.events[t][e]&&n.events[t][e]===r&&(n.config.ignoreDuplicateHandler||console.warn("EventSky warning: duplicate handler for ."+e+"('"+t+"')")),n.events[t].handlers++;var o=n.events[t]._handlers++,i="id_"+t+"."+e+"."+o;return n.events[t][e][i]=r,i}},validateEventName:function(e,n){return e?!(!n||"string"!=typeof n)||(console.error("EventSky error: .trigger(event) did not receive a string param"),!1):console.error("EventSky._utils needs to be passed a valid context param")}};return new(function(){function e(){var n=this;Z(this,e),this.off=function(e,t){return X(n.events).forEach(function(r){X(n.events[r]).forEach(function(o){["beforeAll","on","once","afterAll"].includes(o)&&X(n.events[r][o]).forEach(function(i){var u=n.events[r][o][i]===t&&r===e,a=!t&&i===e;(u||a)&&(delete n.events[r][o][i],n.events[r].handlers--)})})}),n},this.config={firehose:!1,ignoreDuplicateHandler:!1},this._utils=oe,this.events={},this._firehose=function(e){return n.config.firehose?console.log("EventSky Firehose >> "+e):null},this.on=this._utils.curryWhenHandler.bind(this)("on"),this.once=this._utils.curryWhenHandler.bind(this)("once"),this.beforeAll=this._utils.curryWhenHandler.bind(this)("beforeAll"),this.afterAll=this._utils.curryWhenHandler.bind(this)("afterAll"),this.off.all=this.allOff.bind(this)}return re(e,[{key:"allOff",value:function(e){return delete this.events[e],this._firehose('.off.all("'+e+'") removed all event handlers'),this.events[e]=this._utils.createNewEventMap(),this}},{key:"trigger",value:function(e,n){if(!this._utils.validateEventName(this,e))return this;if(!this.events[e])return this._firehose('"'+e+'" triggered with no handlers setup'),this;this._firehose('"'+e+'" triggered');var t=this.events[e].beforeAll;X(t).forEach(function(o){try{t[o](n)}catch(i){t[o]?console.error("EventSky error: .beforeAll('"+e+"', "+(r[o].name||"anonymous")+") handler trapped an error",{error:i,data:n}):console.error("EventSky error: .beforeAll('"+e+"', ...) handler does not exist",{eventId:o,data:n})}});var r=this.events[e].on;X(r).forEach(function(t){try{r[t](n)}catch(o){r[t]?console.error("EventSky error: .on('"+e+"', "+(r[t].name||"anonymous")+") handler trapped an error",{error:o,data:n}):console.error("EventSky error: .on('"+e+"', ...) handler does not exist",{eventId:t,data:n})}});var o=this.events[e].once;X(o).forEach(function(t){try{o[t](n)}catch(i){o[t]?console.error("EventSky error: .once('"+e+"', "+(r[t].name||"anonymous")+") handler trapped an error",{error:i,data:n}):console.error("EventSky error: .once('"+e+"', ...) handler does not exist",{eventId:t,data:n})}});var i=this.events[e].afterAll;return X(i).forEach(function(t){try{i[t](n)}catch(o){i[t]?console.error("EventSky error: .afterAll('"+e+"', "+(r[t].name||"anonymous")+") handler trapped an error",{error:o,data:n}):console.error("EventSky error: .afterAll('"+e+"', ...) handler does not exist",{eventId:t,data:n})}}),this}}]),e}())});
//# sourceMappingURL=build.js.map
