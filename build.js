!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.EventSky=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule?e.default:e}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}var n=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},r=function(e){return Object(n(e))},o={}.hasOwnProperty,i=function(e,t){return o.call(e,t)},u={}.toString,c=function(e){return u.call(e).slice(8,-1)},f=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==c(e)?e.split(""):Object(e)},s=function(e){return f(n(e))},a=Math.ceil,l=Math.floor,h=function(e){return isNaN(e=+e)?0:(e>0?l:a)(e)},d=Math.min,v=function(e){return e>0?d(h(e),9007199254740991):0},p=Math.max,y=Math.min,_=function(e,t){return e=h(e),e<0?p(e+t,0):y(e,t)},b=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),g=b["__core-js_shared__"]||(b["__core-js_shared__"]={}),E=0,w=Math.random(),O=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++E+w).toString(36))},m=function(e){return g[e]||(g[e]={})}("keys"),j=function(e){return function(t,n,r){var o,i=s(t),u=v(i.length),c=_(r,u);if(e&&n!=n){for(;u>c;)if((o=i[c++])!=o)return!0}else for(;u>c;c++)if((e||c in i)&&i[c]===n)return e||c||0;return!e&&-1}}(!1),x=function(e){return m[e]||(m[e]=O(e))}("IE_PROTO"),M=function(e,t){var n,r=s(e),o=0,u=[];for(n in r)n!=x&&i(r,n)&&u.push(n);for(;t.length>o;)i(r,n=t[o++])&&(~j(u,n)||u.push(n));return u},S="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),k=Object.keys||function(e){return M(e,S)},A=t(function(e){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)}),T=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},P=function(e,t,n){if(T(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},F=function(e){return"object"==typeof e?null!==e:"function"==typeof e},W=function(e){if(!F(e))throw TypeError(e+" is not an object!");return e},H=function(e){try{return!!e()}catch(e){return!0}},N=!H(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),C=b.document,I=F(C)&&F(C.createElement),R=function(e){return I?C.createElement(e):{}},B=!N&&!H(function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a}),G=function(e,t){if(!F(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!F(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!F(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!F(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},z=Object.defineProperty,L=N?Object.defineProperty:function(e,t,n){if(W(e),t=G(t,!0),W(n),B)try{return z(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e},U={f:L},q=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},D=N?function(e,t,n){return U.f(e,t,q(1,n))}:function(e,t,n){return e[t]=n,e},J=function(e,t,n){var r,o,i,u=e&J.F,c=e&J.G,f=e&J.S,s=e&J.P,a=e&J.B,l=e&J.W,h=c?A:A[t]||(A[t]={}),d=h.prototype,v=c?b:f?b[t]:(b[t]||{}).prototype;c&&(n=t);for(r in n)(o=!u&&v&&void 0!==v[r])&&r in h||(i=o?v[r]:n[r],h[r]=c&&"function"!=typeof v[r]?n[r]:a&&o?P(i,b):l&&v[r]==i?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(i):s&&"function"==typeof i?P(Function.call,i):i,s&&((h.virtual||(h.virtual={}))[r]=i,e&J.R&&d&&!d[r]&&D(d,r,i)))};J.F=1,J.G=2,J.S=4,J.P=8,J.B=16,J.W=32,J.U=64,J.R=128;var K=J;!function(e,t){var n=(A.Object||{})[e]||Object[e],r={};r[e]=t(n),K(K.S+K.F*H(function(){n(1)}),"Object",r)}("keys",function(){return function(e){return k(r(e))}});var Q=A.Object.keys,V=t(function(e){e.exports={default:Q,__esModule:!0}}),X=e(V),Y=t(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}),Z=e(Y);K(K.S+K.F*!N,"Object",{defineProperty:U.f});var $=A.Object,ee=function(e,t,n){return $.defineProperty(e,t,n)},te=t(function(e){e.exports={default:ee,__esModule:!0}}),ne=t(function(e,t){t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(te);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(e,o.key,o)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()}),re=e(ne),oe={createNewEventMap:function(){return{handlers:0,_handlers:0,on:{},once:{},beforeAll:{},afterAll:{}}},curryWhenHandler:function(e){var t=this;return function(n,r){if("string"!=typeof n||n.length<1||"function"!=typeof r)return console.warn('EventSky warning: "'+n+'" event must be a string and handler must be a function - not set with .'+e+" handler"),t;if(t.config.restrictToExpected&&!X(t.events).includes(n))return t._firehose('"'+n+'" handler cannot be set because it is not an expected event "restrictToExpected = true"'),t;t.events[n]||(t.events[n]=t._utils.createNewEventMap()),t.events[n].handlers++;var o=t.events[n]._handlers++,i="id_"+n+"."+e+"."+o;return t.events[n][e][i]=r,i}}},ie={setExpectedEvents:function(e){return this.config.restrictToExpected=!0,this}};return new(function(){function e(){var t=this;Z(this,e),this.config={restrictToExpected:!1,firehose:!1},this._config=ie,this._utils=oe,this.events={},this._firehose=function(e){return t.config.firehose?console.log("EventSky Firehose >> "+e):null},this.on=this._utils.curryWhenHandler.bind(this)("on"),this.once=this._utils.curryWhenHandler.bind(this)("once"),this.beforeAll=this._utils.curryWhenHandler.bind(this)("beforeAll"),this.afterAll=this._utils.curryWhenHandler.bind(this)("afterAll"),this.off.all=this.allOff.bind(this)}return re(e,[{key:"off",value:function(e,t){var n=this;return X(this.events).forEach(function(r){X(n.events[r]).forEach(function(o){["beforeAll","on","once","afterAll"].includes(o)&&X(n.events[r][o]).forEach(function(i){var u=n.events[r][o][i]===t&&r===e,c=!t&&i===e;(u||c)&&(delete n.events[r][o][i],n.events[r].handlers--)})})}),this}},{key:"allOff",value:function(e){return delete this.events[e],this._firehose('.off.all("'+e+'") removed all event handlers'),this.events[e]=this._utils.createNewEventMap(),this}},{key:"trigger",value:function(e,t){var n=this;if(this.config.restrictToExpected){if(!X(this.events).includes(e))return this._firehose('"'+e+'" triggered and is not an expected event "restrictToExpected = true"'),this}else if(!this.events[e])return this._firehose('"'+e+'" triggered with no handlers setup'),this;this._firehose('"'+e+'" triggered');var r=this.events[e].beforeAll;try{X(r).forEach(function(e){return r[e](t)})}catch(n){console.error("EventSky error: "+e+" beforeAll handler errored",{error:n,data:t})}var o=this.events[e].on;try{X(o).forEach(function(e){return o[e](t)})}catch(n){console.error("EventSky error: "+e+" on handler errored",{error:n,data:t})}var i=this.events[e].once;try{X(i).forEach(function(r){i[r](t),n.off(e,i[r](t))})}catch(n){console.error("EventSky error: "+e+" once handler errored",{error:n,data:t})}var u=this.events[e].afterAll;try{X(u).forEach(function(e){return u[e](t)})}catch(n){console.error("EventSky error: "+e+" afterAll handler errored",{error:n,data:t})}return this}}]),e}())});
//# sourceMappingURL=build.js.map
